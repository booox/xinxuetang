<div id="qz-wrapper">
      <nav class="navbar navbar-default posts-show-navbar" id="qz-header" style="position: fixed; display: none;">
  <div class="navbar-container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-ex1-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="/dashboard">
        <span class="logo"><i class="fa fa-envira logo-icon" aria-hidden="true"></i>å…¨æ ˆè¥</span>
      </a>
    </div>
    <div class="collapse navbar-collapse navbar-ex1-collapse">
      <ul class="nav navbar-nav navbar-left navbar-link">
  <li><a href="/dashboard">å­¦ä¹ ä¸­å¿ƒ</a></li>
  <li><a href="/meetup_groups">Meetup</a></li>
    <li>

      <a href="/live">ç›´æ’­å®¤</a>
    </li>

  <li><a href="/competition_season_2">ç¼–ç¨‹æ¯”èµ›</a></li>
    <li><a target="_blank" href="http://docs.qzy.camp/">å¸®åŠ©æ–‡æ¡£</a></li>
  <li><a target="_blank" href="http://forum.qzy.camp/">äº¤æµè®ºå›</a></li>

</ul>

<ul class="nav navbar-nav navbar-right">
  <li>
  <a class="mail-icon" id="mail-icon-right" href="/conversations">
  <i class="fa fa-envelope" aria-hidden="true"></i>
</a></li>
  <li class="dropdown">
    <a href="#" class="dropdown-toggle" data-toggle="dropdown">
      <i class="fa fa-user-circle" aria-hidden="true"></i>&nbsp;liuzx
      <span class="caret"></span>
    </a>
   <ul class="dropdown-menu custom-dropdown-menu">
      <li><a href="/account/users">æˆ‘çš„è´¦æˆ·</a></li>
      <li><a href="/account/orders">æˆ‘çš„è®¢å•</a></li>
      <li><a href="/account/favorites">æˆ‘çš„æ”¶è—</a></li>
      <li class="divider" role="separator"></li>
      <li><a href="/account/referral_code">æ¨èç </a></li>
      <li class="divider" role="separator"></li>
      <li><a rel="nofollow" data-method="delete" href="/sign_out">é€€å‡º</a></li>
    </ul>
  </li>

</ul>

    </div>
  </div>
</nav>

      <div id="qz-content">
          <div class="course-menu" style="position: fixed; height: 50px; z-index: 1000;">
  <div class="menu-content" style="padding-top: 5px;">
    <div class="left-block hidden-xs">
      <h1><a href="/courses/3/syllabus">Rails ç¬¬ä¸‰è¯¾ï¼šRails 101</a></h1>
    </div>
    <div class="search-block hidden-xs hidden-sm">
      <div class="search">
  <div class="input-block">
    <form class="navbar-form" action="/courses/3/syllabus/search" accept-charset="UTF-8" method="get"><input name="utf8" type="hidden" value="âœ“">
    <div class="input-group">
      <span class="input-group-btn search-btn">
        <button type="submit">
          <i class="fa fa-search"></i>
        </button>
      </span>
      <input type="text" name="q" value="" placeholder="æœç´¢æœ¬è¯¾ç¨‹æ•™æ">
    </div>
</form>  </div>
</div>

    </div>
    <div class="right-block">
      <div class="tab_menu">
        <ul class="nav nav-tabs">
          <li><a href="/courses/3">
          <i class="fa fa-television"></i>
          æ¦‚è§ˆ
</a></li>          <li class="active"><a class="active" href="/courses/3/syllabus">
          <i class="fa fa-list-ul"></i>
          æ•™æ
</a></li>          <li><a href="/courses/3/assignments">
          <i class="fa fa-file-code-o"></i>
          ä½œä¸š
</a></li>          <li><a href="/courses/3/faqs">
          <i class="fa fa-comments-o"></i>
          FAQ
</a></li>          <li><a href="/courses/3/activities">
          <i class="fa fa-tags"></i>
          åŠ¨æ€
</a></li>          <li><a href="/courses/3/leaderboard">
          <i class="fa fa-star-o"></i>
          ç§¯åˆ†æ¦œ
</a></li>        </ul>
      </div>
    </div>
  </div>
</div>

          <div class="fixed" style="height: 125px;"></div>
        <div class="flash-block">

        </div>
        <div class="container course-block" id="show-content">
          <div class="row">
            <!-- <div class="breadcrumb-block">
            </div> -->
            <div class="post-visitor">
  <div class="des-text">
    <p>æœ‰<span>0</span>ä½åŒå­¦æ­£åœ¨æµè§ˆå½“å‰é¡µé¢</p>
  </div>
  <div class="visitors-list">
  </div>
</div>

<div class="course-post">

  <div class="post-title-h1 markdown">
    <h1>
      6-2 å»ºç«‹æ–‡ç« çš„æ¶æ„
    </h1>
    <div id="favorite" class="favorite-icon-block">
        <a class="favorites-tooltip" title="" data-placement="left" data-original-title="æ”¶è—æœ¬èŠ‚æ•™æ" data-remote="true" rel="nofollow" data-method="post" href="/favorites?post_id=76">
    <span class="fa fa-bookmark-o"></span>
</a>
    </div>
  </div>

  <div class="post group">
    <div class="post-content markdown">
      <h2>ç›®æ ‡</h2>
<p>åœ¨è¿™ä¸€ç« ï¼Œæˆ‘ä»¬è¦å¸¦å¤§å®¶åœ¨ç¾¤é‡Œé¢å¯ä»¥å‘æ–‡ç« ã€‚æˆ‘ä»¬ä¼šå®Œæˆä»¥ä¸‹äº‹é¡¹ï¼š</p>

<ul>
<li>æ–‡ç«  Post è¦æœ‰â€œå†…å®¹â€ã€â€œæ‰€å±è®¨è®ºç¾¤ç»„â€ã€â€œå™è¿°â€</li>
<li>å‘æ–‡ç½‘å€æ˜¯åœ¨ <a href="http://localhost:3000/groups/1/posts/new" rel="nofollow" target="_blank">http://localhost:3000/groups/1/posts/new</a>
</li>
</ul>

<p><br></p>
<h2>æ­¥éª¤</h2><h3>Step 0. git checkout -b ch05</h3>
<p>å› ä¸ºæˆ‘ä»¬ç°åœ¨è¦å®ä½œç¬¬äº”ç« çš„å†…å®¹ï¼Œæ–°å¢ä¸€ä¸ª branch æŠŠå®ä½œå†…å®¹é›†ä¸­åœ¨ ch05 æ˜¯æ¯”è¾ƒåˆç†çš„ã€‚å°†æ¥å›é¡¾å°±å¯ä»¥æ¯”è¾ƒæ¸…æ¥š åœ¨ ch05 æˆ‘ä»¬åšäº†å“ªä¸€äº›ç»ƒä¹ ã€‚</p>

<p><code>git checkout -b ch05</code></p>

<p><br></p>
<h3>Step 1. è®¾è®¡ Post çš„ model æ¶æ„</h3>
<ul>
<li>æ–‡ç« å†…å®¹è¦æœ‰â€œå†…å®¹â€ã€â€œæ‰€å±è®¨è®ºç¾¤ç»„â€ã€â€œå™è¿°â€</li>
<li>æˆ‘ä»¬åœ¨è¿™é‡Œè¦å»ºç«‹ä¸€ä¸ª model <strong>Post</strong>ï¼Œå¹¶å»ºç«‹æ•°æ®è¡¨ post çš„ä¸‰ä¸ªæ ä½: content ( text æ–‡å­—å±æ€§) ã€group_id (integer æ•°å­—å±æ€§)ã€ user_id ( integer æ•°å­—å±æ€§ï¼‰</li>
</ul>

<p><code>rails g model post content:text group_id:integer user_id:integer</code></p>

<p>å°†æ•°æ®åº“å»ºç«‹èµ·æ¥ï¼Œå¹¶æ‰§è¡Œ rake db:migrate</p>

<p><code>rake db:migrate</code></p>

<p><br></p>
<h3>Step 2. å»ºç«‹ Group / Post / User ä¸‰è€…é—´çš„å…³ç³»</h3>
<ul>
<li>Group has_many posts</li>
</ul>

<figure class="figure-code code"><figcaption><span>app/models/group.rb
</span></figcaption><div class="highlight"><pre><span class="k">class</span> <span class="nc">Group</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:user</span>
  <span class="n">has_many</span> <span class="ss">:posts</span>
  <span class="n">validates</span> <span class="ss">:title</span><span class="p">,</span> <span class="ss">presence: </span><span class="kp">true</span>
<span class="k">end</span>
</pre></div>
</figure>

<ul>
<li>User has_many posts</li>
</ul>

<figure class="figure-code code"><figcaption><span>app/models/user.rb
</span></figcaption><div class="highlight"><pre><span class="k">class</span> <span class="nc">User</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="c1"># Include default devise modules. Others available are:
</span>
  <span class="c1"># :confirmable, :lockable, :timeoutable and :omniauthable
</span>
  <span class="n">devise</span> <span class="ss">:database_authenticatable</span><span class="p">,</span> <span class="ss">:registerable</span><span class="p">,</span>
         <span class="ss">:recoverable</span><span class="p">,</span> <span class="ss">:rememberable</span><span class="p">,</span> <span class="ss">:trackable</span><span class="p">,</span> <span class="ss">:validatable</span>

  <span class="n">has_many</span> <span class="ss">:groups</span>
  <span class="n">has_many</span> <span class="ss">:posts</span>
<span class="k">end</span>
</pre></div>
</figure>

<ul>
<li>Post belongs_to User</li>
<li>Post belongs_to Group</li>
</ul>

<figure class="figure-code code"><figcaption><span>app/models/post.rb
</span></figcaption><div class="highlight"><pre><span class="k">class</span> <span class="nc">Post</span> <span class="o">&lt;</span> <span class="no">ApplicationRecord</span>
  <span class="n">belongs_to</span> <span class="ss">:user</span>
  <span class="n">belongs_to</span> <span class="ss">:group</span>
<span class="k">end</span>
</pre></div>
</figure>

<p><br></p>
<h3>Step 3. git å­˜æ¡£</h3>
<p><code>git add .</code><br>
<code>git commit -m "add post and hook group/user relation"</code></p>

<p><br></p>
<h3>Step 4. å»ºç«‹ Post Controller</h3>
<p><code>rails g controller posts</code></p>

<p><br></p>
<h3>Step 5. è®¾ç«‹ routing</h3>
<p>ä¿®æ”¹ config/routes.rb</p>

<p>å°† resources :posts åŠ å…¥ resources :groups å†…ã€‚</p>

<p></p><figure><a href="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/tDOcEw7QFyG41ktvz05g_posts_resources.png" data-fancybox="images" class="post-image"><img src="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/tDOcEw7QFyG41ktvz05g_posts_resources.png" title=""></a></figure><p></p>

<figure class="figure-code code"><figcaption><span>config/routes.rb
</span></figcaption><div class="highlight"><pre><span class="no">Rails</span><span class="p">.</span><span class="nf">application</span><span class="p">.</span><span class="nf">routes</span><span class="p">.</span><span class="nf">draw</span> <span class="k">do</span>
  <span class="n">devise_for</span> <span class="ss">:users</span>
  <span class="n">resources</span> <span class="ss">:groups</span> <span class="k">do</span>
    <span class="n">resources</span> <span class="ss">:posts</span>
  <span class="k">end</span>
  <span class="n">root</span> <span class="s1">'groups#index'</span>
<span class="k">end</span>

</pre></div>
</figure>

<p>åšäº†è¿™ä»¶äº‹åï¼Œæ‰§è¡Œ</p>

<p><code>rake routes</code></p>

<p>ç„¶åä½ å°±ä¼šå‘ç°ï¼Œ routing åˆ—è¡¨å†…äº§ç”Ÿäº† /groups/:group_id/posts/new è¿™æ ·çš„ç½‘å€æ”¯æ´ã€‚</p>

<p></p><figure><a href="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/QxlWwWQmR5yUvfzjxkeq_rake_routes.png" data-fancybox="images" class="post-image"><img src="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/QxlWwWQmR5yUvfzjxkeq_rake_routes.png" title=""></a></figure><p></p>

<p><br></p>
<h3>Step 6. git å­˜æ¡£</h3>
<p><code>git add .</code><br>
<code>git commit -m "add posts nested route"</code></p>

<p><br></p>
<h3>Step 7. åœ¨ groups#show æ–°å¢ â€œå‘è¡¨æ–‡ç« â€æŒ‰é’®</h3>
<p>ä¿®æ”¹ app/views/groups/show.html.erb</p>

<p>ç„¶ååŠ å…¥ä¸€è¡Œ</p>

<figure class="figure-code code"><figcaption><span>app/views/groups/show.html.erb
</span></figcaption><div class="highlight"><pre>  <span class="cp">&lt;%=</span> <span class="n">link_to</span><span class="p">(</span><span class="s2">"Write a Post"</span><span class="p">,</span> <span class="n">new_group_post_path</span><span class="p">(</span><span class="vi">@group</span><span class="p">),</span> <span class="ss">class: </span><span class="s2">"btn btn-default pull-right"</span><span class="p">)</span><span class="cp">%&gt;</span>
</pre></div>
</figure>

<p>åœ¨æƒé™åˆ¤æ–­çš„ä½ç½®ä¸Šé¢ï¼š</p>

<p></p><figure><a href="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/IWovsg8Tz2uFiThPPdPj_show_html_erb_%E2%80%94__Users_xdite_Documents_projects_rails101.png" data-fancybox="images" class="post-image"><img src="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/IWovsg8Tz2uFiThPPdPj_show_html_erb_%E2%80%94__Users_xdite_Documents_projects_rails101.png" title=""></a></figure><p></p>

<p>æˆ‘ä»¬å°±å¾—åˆ°äº†ä¸€é¢—å¯ä»¥æ–°å¢æ–‡ç« çš„æŒ‰é’®</p>

<p></p><figure><a href="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/5He41qXDQbqELgONTa7S_Rails101.png" data-fancybox="images" class="post-image"><img src="https://s3-ap-northeast-1.amazonaws.com/ontrackapp-production/5He41qXDQbqELgONTa7S_Rails101.png" title=""></a></figure><p></p>

<p><br></p>
<h3>Step 8. git å­˜æ¡£</h3>
<p><code>git add .</code><br>
<code>git commit -m "add post button"</code></p>

    </div>
  </div>



  <div class="panic-panel">
  <div class="row panic-panel-title">
    <h4>å¯¹æœ¬é¡µå†…å®¹çš„æ„Ÿå—å¦‚ä½•ï¼Ÿ</h4>

      <div class="complain-btn">
        <button type="button" class="btn btn-default btn-sm" data-toggle="modal" data-target="#complainModal" id="want-to-complain-btn">
          ğŸ“£ &nbsp;æˆ‘è¦åæ§½
        </button>
      </div>
  </div>

  <!-- new feeling's UI -->

  <div class="panic-panel-body ui-selectable" id="selectable" data-post-id="76">
    <div class="item  ui-selectee" value="good">
      <div class="ui-widget-content ui-selectee"><span class="emoji ui-selectee">ğŸ˜„</span><span class="text ui-selectee">So easy</span></div>
    </div>
    <div class="item  ui-selectee" value="normal">
      <div class="ui-widget-content ui-selectee"><span class="emoji ui-selectee">ğŸ˜</span><span class="text ui-selectee">è¿˜OK</span></div>
    </div>
    <div class="item  ui-selectee" value="bad">
      <div class="ui-widget-content ui-selectee"><span class="emoji ui-selectee">ğŸ˜­</span><span class="text ui-selectee">å´©æºƒäº†</span></div>
    </div>
  </div>

  <div class="row">
    <span id="status-area" class="feeling-submit-tips"></span>
  </div>

</div>



<!-- åæ§½Modal -->
<div class="modal fade message-modal-style" id="complainModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
  <div class="modal-dialog" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">Ã—</span></button>
        <h4 class="modal-title" id="complainModalLabel">æ‚¨å¯¹æœ¬ç¯‡æ•™ç¨‹æœ‰ä»€ä¹ˆæƒ³è¯´çš„ï¼Ÿ</h4>
      </div>
      <form novalidate="novalidate" class="simple_form new_complain" id="new_complain" action="/complains" accept-charset="UTF-8" method="post"><input name="utf8" type="hidden" value="âœ“"><input type="hidden" name="authenticity_token" value="Zcn1PEEw88LPR8IY/ADoQWLYRs6bQ8pRPMaixh57AwOMfmTuWEwRx0iD6rG1Ck4tdtDu9m0hROCCX6Lj4nouwA==">
        <div class="modal-body">
          <div class="input-block">
            <div class="form-group hidden complain_post_id"><input class="form-control hidden" value="76" type="hidden" name="complain[post_id]" id="complain_post_id"></div>
            <div class="form-group text optional complain_content"><label class="control-label text optional" for="complain_content">æ§½ç‚¹/åé¦ˆ(å¦‚æœé‡åˆ°è¯¾ç¨‹æŠ€æœ¯é—®é¢˜ï¼Œè¯·ç›´æ¥åˆ°Slackå‘åŠ©æ•™æé—®)</label><textarea class="form-control text optional" name="complain[content]" id="complain_content"></textarea></div>
            <div class="message-modal-footer">
              <a href="#" data-dismiss="modal">å–æ¶ˆ</a>
              <input type="submit" name="commit" value="åæ§½" class="btn btn-primary" id="complain-submit-btn" disabled="disabled">
            </div>
          </div>
        </div>
</form>    </div>
  </div>
</div>


    <div class="group post-nav-btn">

<ul class="pager-custom">
  <li class="previous"> <a id="previous" href="/posts/75"><i class="fa fa-arrow-left"></i><span> ä¸Šä¸€é¡µ</span></a></li>
  <li class="keyboard-tips"><i class="fa fa-lightbulb-o" aria-hidden="true"></i>å¯ä»¥ä½¿ç”¨<kbd>â†</kbd><kbd>â†’</kbd>é”®è¿›è¡Œç¿»é¡µ</li>
  <li class="next"><a href="/posts/77">ä¸‹ä¸€é¡µ<span class="fa fa-arrow-right" id="next"></span></a> </li>
</ul>

    </div>



</div>

          </div>
        </div>
        <div id="backtotop" style="display: block;">
          <a href="#" class="btn-backtotop">
            <span class="up-arrow">
              <i class="fa fa-arrow-up" aria-hidden="true"></i>
            </span>
          </a>
        </div>
      </div>
      <script src="/assets/course-11fc416bbdb3b371a15a729e4e5096fce1e3eb54e0d99b9b63f05f784135c6a4.js"></script>
      <footer id="qz-footer">
    <div class="footer-section">
        <div class="footer-content">
            <div class="contact-line-block">
                <div class="right-block">
                    <div class="line">
                        <div class="icon">
                            <i class="fa fa-comments-o fa-fw" aria-hidden="true"></i>
                        </div>
                        <div class="link">
                            <a href="#" onclick="Intercom('show');">åœ¨çº¿å®¢æœ<br class="mobile-view">
                                <span class="xs-mobile">(éæŠ€æœ¯ç­”ç–‘ï¼Œå·¥ä½œæ—¥10:00-19:00)</span>
                            </a>
                        </div>
                    </div>
                    <div class="introduce">
                        <div class="img-block">
                            <a href="http://www.xinshengdaxue.com/" target="_blank"><img src="https://fullstack.xinshengdaxue.com/images/xsdx-logo.png"></a>
                        </div>
                        <div class="introduce-block">
                            <p>
                                æ–°ç”Ÿå¤§å­¦ - è½¯ä»¶å­¦é™¢æ˜¯æç¬‘æ¥å¯¹æœªæ¥ä¸–ç•Œçš„å®éªŒè®¡åˆ’ï¼Œæ—¨åœ¨æ”¹å˜ä¸­å›½çš„è®¡ç®—æœºæ•™è‚²ã€‚
                            </p>
                        </div>
                    </div>
                </div>
            </div>
            <div class="des-block">
              <div class="column-block">
                <div class="column-left">
                    <ul class="list-unstyled">
                        <li class="column-title">å…¨æ ˆè¥</li>
                        <li><a href="/pages/course_intro">è¯¾ç¨‹ä»‹ç»</a></li>
                        <li><a href="/pages/teachers">æ•™å­¦å›¢é˜Ÿ</a></li>
                        <li><a href="/pages/students">å­¦å‘˜å¿ƒå¾—</a></li>
                    </ul>
                </div>
                <div class="column-center">
                    <ul class="list-unstyled">
                        <li class="column-title">è¯¾ç¨‹èµ„æº</li>
                        <li><a href="/dashboard">å­¦ä¹ ä¸­å¿ƒ</a></li>
                        <li><a target="_blank" href="http://docs.qzy.camp/">å¸®åŠ©æ–‡æ¡£</a></li>
                        <li><a target="_blank" href="http://forum.qzy.camp/">äº¤æµè®ºå›</a></li>
                    </ul>
                </div>
                <div class="column-right">
                    <ul class="list-unstyled">
                        <li class="column-title">å…³äºæˆ‘ä»¬</li>
                        <li><a href="/pages/about">å…¬å¸ä»‹ç»</a></li>
                        <li><a href="/pages/faq">å¸¸è§é—®é¢˜</a></li>
                        <li><a href="/pages/contact">è”ç³»æ–¹å¼</a></li>
                    </ul>
                </div>
            </div>
          </div>

            <div class="fline"></div>
            <div class="copyright-block">
                <div class="copyright-content">
                    <div class="copyright-info">
                        <p>
                            Â© 2017 æƒ…éå¾—å·²(åŒ—äº¬)ç§‘æŠ€æœ‰é™å…¬å¸
                        </p>
                    </div>
                    <div class="legal-info">
                      <p>
                          æœ¬ç«™è˜è¯·å­™é›é£å¾‹å¸ˆä¸ºæ³•å¾‹é¡¾é—®
                      </p>
                    </div>
                </div>
            </div>
        </div>
    </div>
</footer>

      <div id="modal-from-dom" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="modal-from-dom-label" aria-hidden="true">

</div>

    </div>
